import{b as Qe,z as w,A as O,h as Ve,t as m,f as h,e as s,n as P,a as v,d as i,q as c,r as o,l as _,B as ue,j as Xe,w as k,v as fe,k as xe,c as Ze,s as $e,D as ea,$ as aa,o as ta,Y as ra,x as S,E as _e,F as ia}from"./app-D6DGB2TE.js";import{I as T,h as sa}from"./Icon-CvsQ4OeG.js";import{a as F}from"./attributes-C_luwKBq.js";import{s as oa}from"./class-HXxvyyYd.js";import{A as la,L as ee}from"./AuthenticatedLayout-B5i_oS6m.js";import na from"./CalculatorWrapper-B9IpJ2V7.js";import{B as A}from"./Button-DwtBySkT.js";import{S as da}from"./Switch-CFrqgLWL.js";import ae from"./FavoriteStar-BNFhfA5s.js";import va from"./ShareMix-CP6QrFNh.js";import{o as ge,c as ma,t as ca,u as ua,m as fa,h as xa,d as _a,s as ga,I as he}from"./Ingredient-CVmKmvEX.js";import"./index-client-CW11BzbF.js";import"./style-Clde2EGf.js";import"./snippet-DuWJIlP1.js";import"./link-JtF4iLD6.js";import"./ApplicationLogo-Ci-Q2pUW.js";import"./index-CW8go6Q0.js";import"./slot-BSClHNB2.js";import"./Calculator-D-MCFcQI.js";import"./Keypad-CMbuZ8LW.js";import"./Draggable-lRESESfB.js";import"./this-POYFIn7J.js";import"./input-ZsfIajx7.js";import"./Input-kbV5FIuC.js";var ha=(B,e)=>{w(e,!1)},ba=(B,e)=>{w(e,!1)},pa=m("<!> Back to Mixes",1),wa=m("<!> Edit",1),ya=m("<!> Duplicate & edit",1),ka=m('<span class=" flex items-center sm:hidden"><!></span>'),ja=m('<span class="flex items-center sm:hidden"><!></span> <!>',1),Pa=m('<img src="/storage/pexels-martabranco-1340116.jpg" alt="4 spoons with spices" class="max-h-full min-h-full w-full min-w-full max-w-full overflow-hidden rounded-md object-cover object-center"> <a target="_blank" class="z-2 absolute bottom-[0px] left-[0px] rounded-tr-md p-1 text-base font-light backdrop-blur-sm backdrop-brightness-50 hover:scale-105 hover:brightness-110">Fallback<!></a>',1),Sa=m('<a target="_blank" class="z-2 absolute bottom-[0px] left-[0px] rounded-tr-md p-1 text-base font-light backdrop-blur-sm backdrop-brightness-50 hover:scale-105 hover:brightness-110">src <!></a>'),Ta=m('<img class="max-h-full min-h-full min-w-full max-w-full overflow-hidden rounded-md object-cover object-center"> <!>',1),Da=(B,e)=>{B.stopPropagation(),w(e,!0)},Ia=m('<div class="mb-1 mt-2"><strong>Optional:</strong></div> <!>',1),za=m('<div class="flex items-center gap-2"><!> <!> <!></div> <div class="-mb-2 mt-2 text-sm font-light"><strong>Total</strong> (excl. weight measures) â‰ˆ <span class="font-medium"> </span></div> <!>',1),Aa=m('<div class="box"><h4>Description</h4> <p><!></p></div>'),Ba=m('<p><strong>Source(s):</strong> <a class="underline"> </a></p>'),Ca=m("<strong>Source:</strong> ",1),Ea=m(`<strong>Accepted!</strong> Thank you for contributing to tastier cooking for
                        all:) You should be able to find a public mix with this name now.`,1),Ma=m("<br> <strong>Reason given:</strong> ",1),Oa=m("<strong>Denied.</strong> Sorry! Maybe next time:) <!>",1),Fa=m("<strong>Under review!</strong> Please be patient:)",1),La=m('<div class="px-4"><p><strong class="mb-2">Share status: <br></strong> Thank you for submitting your mix for sharing on the homepage! The status is: <br> <!></p></div>'),Ga=m('<div class="page flex cursor-auto flex-col gap-6" role="button" tabindex="0"><div class="flex w-full items-center justify-between gap-6 px-2"><!> <!></div> <div><h1 class="flex w-full items-center gap-2 font-primary text-3xl font-medium sm:w-fit"> <span class="hidden items-center sm:flex"><!></span> <!></h1> <div class="flex w-fit items-end"><!></div></div> <div class="flex flex-wrap items-stretch justify-stretch gap-6 md:justify-between"><div class="relative max-h-[250px] !w-full !min-w-[calc(min(400px,100%))] flex-1 overflow-hidden rounded-md border border-uiGray-400 object-cover sm:max-h-[700px] md:max-w-[500px]"><!></div> <div class="box flex min-w-[calc(min(400px,100%))] flex-1 flex-col justify-between gap-y-4"><div class="flex w-full items-start justify-between"><div class="w-full"><div class="flex w-full flex-1 items-start justify-between py-4"><div class="flex items-center justify-start"><h4>Ingredients:</h4> &nbsp; <div class="mb-1 inline text-center font-light text-uiDark-100"> </div></div> <button class="rounded-lg border border-primary-400 p-1 text-white"><!></button></div> <ul class="leading-0 relative ml-0 w-fit list-none"><!> <!></ul></div></div> <!></div></div> <!> <div class="px-4"><p><strong>Cuisine:</strong> </p> <!></div> <!></div> <!>',1);function vt(B,e){Qe(e,!0);const[be,pe]=$e(),te=()=>Xe(ea,"$page",be);ge(e.mix,e.measures),ma(e.mix,e.measures);let re=O(void 0);ca.subscribe(y=>{w(re,y,!0)});let G=O(void 0);ua.subscribe(y=>{w(G,y,!0)});let D=O(1);fa.subscribe(y=>{w(D,y,!0)});let I=O(!1),U=O(!1);function we(){w(U,!0)}Ve(y=>{k(()=>{var Y,C;return aa.title=((C=(Y=e.mix)==null?void 0:Y.data)==null?void 0:C.name)??"mix"})}),la(B,{children:(y,Y)=>{var C=Ga(),E=h(C);E.__keyup=[ha,I],E.__click=[ba,I];var q=s(E),ie=s(q);A(ie,{class:" !bg-secondary-600 !text-uiGray-50 hover:bg-secondary-400 ",children:(a,t)=>{ee(a,{href:route("home"),class:"flex items-center gap-1 ",children:(r,l)=>{var n=pa(),f=h(n);T(f,{icon:"mdi:arrow-left-circle",class:"mb-[2px] size-4"}),P(),v(r,n)},$$slots:{default:!0}})},$$slots:{default:!0}});var ye=i(ie,2);{var ke=a=>{const t=fe(()=>route("mixes.edit",e.mix.data.id));ee(a,{get href(){return _(t)},children:(r,l)=>{A(r,{primary:!0,children:(n,f)=>{var u=wa(),x=h(u);T(x,{icon:"mdi:pencil",class:""}),P(),v(n,u)},$$slots:{default:!0}})},$$slots:{default:!0}})},je=(a,t)=>{{var r=l=>{const n=fe(()=>route("mixes.duplicate",e.mix.data.id));ee(l,{get href(){return _(n)},children:(f,u)=>{A(f,{primary:!0,children:(x,p)=>{var b=ya(),g=h(b);T(g,{icon:"mdi:pencil",class:""}),P(),v(x,b)},$$slots:{default:!0}})},$$slots:{default:!0}})};c(a,l=>{te().props.auth.user&&l(r)},t)}};c(ye,a=>{e.mix.data.editable?a(ke):a(je,!1)})}o(q);var L=i(q,2),R=s(L),se=s(R),W=i(se),Pe=s(W);ae(Pe,{get mix(){return e.mix.data},class:"inline"}),o(W);var Se=i(W,2);{var Te=a=>{var t=ka(),r=s(t);ae(r,{get mix(){return e.mix.data}}),o(t),v(a,t)};c(Se,a=>{e.mix.data.editable||a(Te)})}o(R);var oe=i(R,2),De=s(oe);{var Ie=a=>{var t=ja(),r=h(t),l=s(r);ae(l,{get mix(){return e.mix.data}}),o(r);var n=i(r,2);va(n,{get mix(){return e.mix},class:"mt-2"}),v(a,t)};c(De,a=>{e.mix.data.editable&&a(Ie)})}o(oe),o(L);var H=i(L,2),J=s(H),ze=s(J);{var Ae=a=>{var t=Pa(),r=i(h(t),2);F(r,"href","https://www.pexels.com/photo/four-assorted-spices-on-wooden-spoons-1340116/");var l=i(s(r));T(l,{icon:"mdi:link-variant",class:"inline"}),o(r),v(a,t)},Be=(a,t)=>{{var r=l=>{var n=Ta(),f=h(n),u=i(f,2);{var x=p=>{var b=Sa(),g=i(s(b));T(g,{icon:"mdi:link-variant",class:"inline"}),o(b),k(()=>F(b,"href",`${e.mix.data.img_source}`)),v(p,b)};c(u,p=>{e.mix.data.img_source!=""&&e.mix.data.img_source!=null&&p(x)})}k(()=>{F(f,"src",e.mix.data.avatar),F(f,"alt",e.mix.data.name)}),ta("error",f,we),ra(f),v(l,n)};c(a,l=>{e.mix.data.avatar&&!_(U)&&l(r)},t)}};c(ze,a=>{!e.mix.data.avatar||_(U)?a(Ae):a(Be,!1)})}o(J);var le=i(J,2),K=s(le),ne=s(K),N=s(ne),Q=s(N),de=i(s(Q),2),Ce=s(de,!0);o(de),o(Q);var V=i(Q,2);V.__click=[Da,I];var Ee=s(V);T(Ee,{icon:"mdi:calculator",class:"text-2xl"}),o(V),o(N);var ve=i(N,2),me=s(ve);ue(me,17,()=>e.mix.data.ingredients.filter(a=>!a.optional),_e,(a,t)=>{he(a,{get ingredient(){return _(t)},get mix(){return e.mix},get measures(){return e.measures}})});var Me=i(me,2);{var Oe=a=>{var t=Ia(),r=i(h(t),2);ue(r,17,()=>e.mix.data.ingredients.filter(l=>l.optional),_e,(l,n)=>{he(l,{get ingredient(){return _(n)},get mix(){return e.mix},get measures(){return e.measures}})}),v(a,t)};c(Me,a=>{e.mix.data.ingredients.filter(t=>t.optional).length>0&&a(Oe)})}o(ve),o(ne),o(K);var Fe=i(K,2);{var Le=a=>{var t=za(),r=h(t),l=s(r);A(l,{class:"!rounded-full !bg-primary-600 !px-2 !py-1 !text-white",onclick:d=>{d.stopPropagation(),xa(e.mix,e.measures)},children:(d,j)=>{P();var z=xe("half");v(d,z)},$$slots:{default:!0}});var n=i(l,2);A(n,{class:"!rounded-full !bg-primary-600 !px-1 !py-1 !text-white",onclick:d=>{d.stopPropagation(),_a(e.mix,e.measures)},children:(d,j)=>{P();var z=xe("double");v(d,z)},$$slots:{default:!0}});var f=i(n,2);{var u=d=>{A(d,{class:"!rounded-full !bg-primary-600 !p-1 !text-white",onclick:j=>{j.stopPropagation(),ge(e.mix,e.measures)},children:(j,z)=>{T(j,{icon:"mdi:arrow-u-left-top"})},$$slots:{default:!0}})};c(f,d=>{_(D)!=1&&d(u)})}o(r);var x=i(r,2),p=i(s(x),2),b=s(p,!0);o(p),o(x);var g=i(x,2);da(g,{switchClass:"!scale-75",textClass:"font-light text-sm",text:"Use original units",click:()=>{setTimeout(ga(),100)},get checked(){return _(G)},set checked(d){w(G,d,!0)}}),k(()=>S(b,_(re))),v(a,t)};c(Fe,a=>{e.mix.data.ingredients.length>0&&a(Le)})}o(le),o(H);var ce=i(H,2);{var Ge=a=>{var t=Aa(),r=i(s(t),2),l=s(r);sa(l,()=>{var n;return(n=e.mix.data)==null?void 0:n.description}),o(r),o(t),v(a,t)};c(ce,a=>{var t;(t=e.mix.data)!=null&&t.description&&a(Ge)})}var X=i(ce,2),Z=s(X),Ue=i(s(Z));o(Z);var Ye=i(Z,2);{var qe=a=>{var t=Ba(),r=i(s(t),2),l=s(r,!0);o(r),o(t),k(()=>{var n;F(r,"href",e.mix.data.source_url),S(l,((n=e.mix.data)==null?void 0:n.source_name)??"link")}),v(a,t)},Re=(a,t)=>{{var r=l=>{var n=Ca(),f=i(h(n),1,!0);k(()=>{var u;return S(f,(u=e.mix.data)==null?void 0:u.source_name)}),v(l,n)};c(a,l=>{var n;(n=e.mix.data)!=null&&n.source_name&&l(r)},t)}};c(Ye,a=>{var t;(t=e.mix.data)!=null&&t.source_url?a(qe):a(Re,!1)})}o(X);var We=i(X,2);{var He=a=>{var t=La(),r=s(t),l=i(s(r),4);{var n=u=>{var x=Ea();P(),v(u,x)},f=(u,x)=>{{var p=g=>{var d=Oa(),j=i(h(d),2);{var z=$=>{var M=Ma(),Ne=i(h(M),3);k(()=>S(Ne,` ${e.mix.data.share_decline_reason??""}`)),v($,M)};c(j,$=>{var M;(M=e.mix.data)!=null&&M.share_decline_reason&&$(z)})}v(g,d)},b=g=>{var d=Fa();P(),v(g,d)};c(u,g=>{var d;((d=e.mix.data)==null?void 0:d.share_accepted)==!1?g(p):g(b,!1)},x)}};c(l,u=>{var x;((x=e.mix.data)==null?void 0:x.share_accepted)==!0?u(n):u(f,!1)})}o(r),o(t),v(a,t)};c(We,a=>{var t;te().props.auth.user&&((t=e.mix.data)==null?void 0:t.share_mix)==!0&&a(He)})}o(E);var Je=i(E,2);{var Ke=a=>{na(a,{$$events:{close:()=>w(I,!1)}})};c(Je,a=>{_(I)&&a(Ke)})}k(()=>{oa(L,1,`flex w-full flex-wrap justify-between px-2 ${_(I)?"pointer-events-none":"pointer-events-auto"}`),S(se,`${e.mix.data.name??""} `),S(Ce,_(D)==1?"":_(D)<1?`/ ${1/_(D)}`:`* ${_(D)}`),S(Ue,` ${e.mix.data.cuisine.name??""}`)}),v(y,C)},$$slots:{default:!0}}),Ze(),pe()}ia(["keyup","click"]);export{vt as default};
