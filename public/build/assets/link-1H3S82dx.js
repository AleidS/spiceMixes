import{a1 as x,u as P,I as j,T as q,aZ as M,W as p,a_ as N,a$ as b}from"./app-DU2Tsdzb.js";function W(a,d,s){x(()=>{var i=P(()=>d(a,s==null?void 0:s())||{});if(s&&(i!=null&&i.update)){var c=!1,f={};j(()=>{var o=s();q(o),c&&M(f,o)&&(f=o,i.update(o))}),c=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function B(a,d={}){let s=0,i,c=[],f,o,l,y,v,h;const E={click:e=>{b(e)&&(e.preventDefault(),p.visit(l,h))}},A={mouseenter:()=>i=setTimeout(()=>k(),75),mouseleave:()=>clearTimeout(i),click:E.click},S={mousedown:e=>{b(e)&&(e.preventDefault(),k())},mouseup:e=>{e.preventDefault(),p.visit(l,h)},click:e=>{b(e)&&e.preventDefault()}};function T({cacheFor:e=0,prefetch:t=!1,...r}){var g;c=t===!0?["hover"]:t===!1?[]:Array.isArray(t)?t:[t],f=e!==0?e:c.length===1&&c[0]==="click"?0:3e4,o=((g=r.method)==null?void 0:g.toLowerCase())||"get",[l,y]=D(o,r),a.tagName==="A"&&(a.href=l),v={data:y,method:o,replace:r.replace||!1,preserveScroll:r.preserveScroll||!1,preserveState:r.preserveState??o!=="get",only:r.only||[],except:r.except||[],headers:r.headers||{},async:r.async||!1},h={...v,onStart:n=>(s++,C(),u("start",{detail:{visit:n}})),onProgress:n=>u("progress",{detail:{progress:n}}),onFinish:n=>(s--,C(),u("finish",{detail:{visit:n}})),onBefore:n=>u("before",{cancelable:!0,detail:{visit:n}}),onCancel:()=>u("cancel"),onSuccess:n=>u("success",{detail:{page:n}}),onError:n=>u("error",{detail:{errors:n}}),onCancelToken:n=>u("cancel-token",{detail:{token:n}})},F()}function u(e,t={}){return a.dispatchEvent(new CustomEvent(e,t))}function D(e,t){return N(e,a.href||t.href||"",t.data||{},t.queryStringArrayFormat||"brackets")}function k(){p.prefetch(l,v,{cacheFor:f})}function C(){if(s>0){a.setAttribute("data-loading","");return}a.removeAttribute("data-loading")}function F(){if(L(),c.includes("hover")){m(A);return}if(c.includes("click")){m(S);return}m(E)}function m(e){Object.entries(e).forEach(([t,r])=>{a.addEventListener(t,r)})}function L(){[A,S,E].forEach(e=>{Object.entries(e).forEach(([t,r])=>{a.removeEventListener(t,r)})})}function w(){clearTimeout(i),L()}return T(d),c.includes("mount")&&k(),{update:T,destroy:w}}export{W as a,B as l};
