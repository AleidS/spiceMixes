import{a3 as q,u as w,I as x,N,aY as P,W as y,aZ as M,a_ as p}from"./app-BRwVW5BY.js";function W(c,d,o){q(()=>{var i=w(()=>d(c,o==null?void 0:o())||{});if(o&&(i!=null&&i.update)){var s=!1,u={};x(()=>{var a=o();N(a),s&&P(u,a)&&(u=a,i.update(a))}),s=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function B(c,d={}){let o=0,i,s=[],u,a,l,m,h,v;const E={click:e=>{p(e)&&(e.preventDefault(),y.visit(l,v))}},A={mouseenter:()=>i=setTimeout(()=>k(),75),mouseleave:()=>clearTimeout(i),click:E.click},S={mousedown:e=>{p(e)&&(e.preventDefault(),k())},mouseup:e=>{e.preventDefault(),y.visit(l,v)},click:e=>{p(e)&&e.preventDefault()}};function C({cacheFor:e=0,prefetch:t=!1,...r}){var D;s=t===!0?["hover"]:t===!1?[]:Array.isArray(t)?t:[t],u=e!==0?e:s.length===1&&s[0]==="click"?0:3e4,a=typeof r.href=="object"?r.href.method:((D=r.method)==null?void 0:D.toLowerCase())||"get",[l,m]=T(a,r),c.tagName==="A"&&(c.href=l),h={data:m,method:a,replace:r.replace||!1,preserveScroll:r.preserveScroll||!1,preserveState:r.preserveState??a!=="get",only:r.only||[],except:r.except||[],headers:r.headers||{},async:r.async||!1},v={...h,onStart:n=>(o++,L(),f("start",{detail:{visit:n}})),onProgress:n=>f("progress",{detail:{progress:n}}),onFinish:n=>(o--,L(),f("finish",{detail:{visit:n}})),onBefore:n=>f("before",{cancelable:!0,detail:{visit:n}}),onCancel:()=>f("cancel"),onSuccess:n=>f("success",{detail:{page:n}}),onError:n=>f("error",{detail:{errors:n}}),onCancelToken:n=>f("cancel-token",{detail:{token:n}})},j()}function f(e,t={}){return c.dispatchEvent(new CustomEvent(e,t))}function T(e,t){return M(e,typeof t.href=="object"?t.href.url:c.href||t.href||"",t.data||{},t.queryStringArrayFormat||"brackets")}function k(){y.prefetch(l,h,{cacheFor:u})}function L(){if(o>0){c.setAttribute("data-loading","");return}c.removeAttribute("data-loading")}function j(){if(g(),s.includes("hover")){b(A);return}if(s.includes("click")){b(S);return}b(E)}function b(e){Object.entries(e).forEach(([t,r])=>{c.addEventListener(t,r)})}function g(){[A,S,E].forEach(e=>{Object.entries(e).forEach(([t,r])=>{c.removeEventListener(t,r)})})}function F(){clearTimeout(i),g()}return C(d),s.includes("mount")&&k(),{update:C,destroy:F}}export{W as a,B as l};
