import{b as Qe,z as y,A as O,h as Ve,t as v,f as p,e as s,n as z,a as m,d as r,q as c,r as l,l as f,B as fe,j as Xe,w,v as G,k as xe,c as Ze,s as $e,D as ea,$ as aa,x as j,o as ta,Y as ra,E as _e,F as ia}from"./app-CemfANES.js";import{I as S,h as sa}from"./Icon-CzPUdmo0.js";import{a as F}from"./attributes-BxW8sb_2.js";import{s as la}from"./class-t79HA7bW.js";import{A as oa,L as ae}from"./AuthenticatedLayout-CovbX0E9.js";import na from"./CalculatorWrapper-Czd8Tebe.js";import{B as A}from"./Button-D6AZe0to.js";import{S as da}from"./Switch-3TO3fx0q.js";import te from"./FavoriteStar-CZfvAsPR.js";import ma from"./ShareMix-DnTysKyg.js";import{o as ge,c as va,t as ca,u as ua,m as fa,h as xa,d as _a,s as ga,I as he}from"./Ingredient-Dv8lLL8J.js";import"./index-client-W58-rIl8.js";import"./style-BRACF1Fj.js";import"./snippet-BH7Y9Z2Y.js";import"./link-vg2Rx1i1.js";import"./ApplicationLogo-DPrf4gR_.js";import"./index-CM-X2RAL.js";import"./slot-DbSPeB-4.js";import"./Calculator-cMDrhG66.js";import"./Keypad-B8E0juaS.js";import"./Draggable-CWWFAjPY.js";import"./this-CN7DHgay.js";import"./input-A1a0aCFc.js";import"./Input-BjpaXY4u.js";var ha=(B,e)=>{y(e,!1)},ba=(B,e)=>{y(e,!1)},pa=v("<!> Back to Mixes",1),wa=v("<!> ",1),ya=v("<!> Duplicate & edit",1),ka=v('<span class=" flex items-center sm:hidden"><!></span>'),ja=v('<span class="flex items-center sm:hidden"><!></span> <!>',1),Pa=v('<img src="/storage/pexels-martabranco-1340116.jpg" alt="4 spoons with spices" class="max-h-full min-h-full w-full min-w-full max-w-full overflow-hidden rounded-md object-cover object-center"> <a target="_blank" class="z-2 absolute bottom-[0px] left-[0px] rounded-tr-md p-1 text-base font-light backdrop-blur-sm backdrop-brightness-50 hover:scale-105 hover:brightness-110">Fallback<!></a>',1),Sa=v('<a target="_blank" class="z-2 absolute bottom-[0px] left-[0px] rounded-tr-md p-1 text-base font-light backdrop-blur-sm backdrop-brightness-50 hover:scale-105 hover:brightness-110">src <!></a>'),Ta=v('<img class="max-h-full min-h-full min-w-full max-w-full overflow-hidden rounded-md object-cover object-center"> <!>',1),Da=(B,e)=>{B.stopPropagation(),y(e,!0)},Ia=v('<div class="mb-1 mt-2"><strong>Optional:</strong></div> <!>',1),za=v('<div class="flex items-center gap-2"><!> <!> <!></div> <div class="-mb-2 mt-2 text-sm font-light"><strong>Total</strong> (excl. weight measures) â‰ˆ <span class="font-medium"> </span></div> <!>',1),Aa=v('<div class="box"><h4>Description</h4> <p class="flex flex-col gap-1"><!></p></div>'),Ba=v('<p><strong>Source(s):</strong> <a class="underline"> </a></p>'),Ca=v("<strong>Source:</strong> ",1),Ea=v(`<strong>Accepted!</strong> Thank you for contributing to tastier cooking for
                        all:) You should be able to find a public mix with this name now.`,1),Ma=v("<br> <strong>Reason given:</strong> ",1),Oa=v("<strong>Denied.</strong> Sorry! Maybe next time:) <!>",1),Fa=v("<strong>Under review!</strong> Please be patient:)",1),La=v('<div class="px-4"><p><strong class="mb-2">Share status: <br></strong> Thank you for submitting your mix for sharing on the homepage! The status is: <br> <!></p></div>'),Ga=v('<div class="page flex cursor-auto flex-col gap-6" role="button" tabindex="0"><div class="flex w-full items-center justify-between gap-6 px-2"><!> <!></div> <div><h1 class="flex w-full items-center gap-2 font-primary text-3xl font-medium sm:w-fit"> <span class="hidden items-center sm:flex"><!></span> <!></h1> <div class="flex w-fit items-end"><!></div></div> <div class="flex flex-wrap items-stretch justify-stretch gap-6 md:justify-between"><div class="relative max-h-[250px] !w-full !min-w-[calc(min(400px,100%))] flex-1 overflow-hidden rounded-md border border-uiGray-400 object-cover sm:max-h-[700px] md:max-w-[500px]"><!></div> <div class="box flex min-w-[calc(min(400px,100%))] flex-1 flex-col justify-between gap-y-4"><div class="flex w-full items-start justify-between"><div class="w-full"><div class="flex w-full flex-1 items-start justify-between py-4"><div class="flex items-center justify-start"><h4>Ingredients:</h4> &nbsp; <div class="mb-1 inline text-center font-light text-uiDark-100"> </div></div> <button class="rounded-lg border border-primary-400 p-1 text-white"><!></button></div> <ul class="leading-0 relative ml-0 w-fit list-none"><!> <!></ul></div></div> <!></div></div> <!> <div class="px-4"><p><strong>Cuisine:</strong> </p> <!></div> <!></div> <!>',1);function mt(B,e){Qe(e,!0);const[be,pe]=$e(),re=()=>Xe(ea,"$page",be);ge(e.mix,e.measures),va(e.mix,e.measures);let ie=O(void 0);ca.subscribe(k=>{y(ie,k,!0)});let U=O(void 0);ua.subscribe(k=>{y(U,k,!0)});let T=O(1);fa.subscribe(k=>{y(T,k,!0)});let D=O(!1),Y=O(!1);function we(){y(Y,!0)}Ve(k=>{w(()=>{var q,C;return aa.title=((C=(q=e.mix)==null?void 0:q.data)==null?void 0:C.name)??"mix"})}),oa(B,{children:(k,q)=>{var C=Ga(),E=p(C);E.__keyup=[ha,D],E.__click=[ba,D];var R=s(E),se=s(R);A(se,{class:" !bg-secondary-600 !text-uiGray-50 hover:bg-secondary-400 ",children:(a,t)=>{ae(a,{href:route("home"),class:"flex items-center gap-1 ",children:(i,o)=>{var n=pa(),u=p(n);S(u,{icon:"mdi:arrow-left-circle",class:"mb-[2px] size-4"}),z(),m(i,n)},$$slots:{default:!0}})},$$slots:{default:!0}});var ye=r(se,2);{var ke=a=>{const t=G(()=>route("mixes.edit",e.mix.data.id));ae(a,{get href(){return f(t)},children:(i,o)=>{const n=G(()=>e.mix.data.user_id==null?"false":"true"),u=G(()=>e.mix.data.user_id==null?"!bg-success-600":"bg-primary-600");A(i,{get primary(){return f(n)},get class(){return f(u)},children:(x,_)=>{var b=wa(),g=p(b);S(g,{icon:"mdi:pencil",class:""});var h=r(g);w(()=>j(h,` Edit ${e.mix.data.user_id==null?"for everyone":""}`)),m(x,b)},$$slots:{default:!0}})},$$slots:{default:!0}})},je=(a,t)=>{{var i=o=>{const n=G(()=>route("mixes.duplicate",e.mix.data.id));ae(o,{get href(){return f(n)},children:(u,x)=>{A(u,{primary:!0,children:(_,b)=>{var g=ya(),h=p(g);S(h,{icon:"mdi:pencil",class:""}),z(),m(_,g)},$$slots:{default:!0}})},$$slots:{default:!0}})};c(a,o=>{re().props.auth.user&&o(i)},t)}};c(ye,a=>{e.mix.data.editable?a(ke):a(je,!1)})}l(R);var L=r(R,2),W=s(L),le=s(W),H=r(le),Pe=s(H);te(Pe,{get mix(){return e.mix.data},class:"inline"}),l(H);var Se=r(H,2);{var Te=a=>{var t=ka(),i=s(t);te(i,{get mix(){return e.mix.data}}),l(t),m(a,t)};c(Se,a=>{e.mix.data.editable||a(Te)})}l(W);var oe=r(W,2),De=s(oe);{var Ie=a=>{var t=ja(),i=p(t),o=s(i);te(o,{get mix(){return e.mix.data}}),l(i);var n=r(i,2);ma(n,{get mix(){return e.mix},class:"mt-2"}),m(a,t)};c(De,a=>{e.mix.data.editable&&a(Ie)})}l(oe),l(L);var J=r(L,2),K=s(J),ze=s(K);{var Ae=a=>{var t=Pa(),i=r(p(t),2);F(i,"href","https://www.pexels.com/photo/four-assorted-spices-on-wooden-spoons-1340116/");var o=r(s(i));S(o,{icon:"mdi:link-variant",class:"inline"}),l(i),m(a,t)},Be=(a,t)=>{{var i=o=>{var n=Ta(),u=p(n),x=r(u,2);{var _=b=>{var g=Sa(),h=r(s(g));S(h,{icon:"mdi:link-variant",class:"inline"}),l(g),w(()=>F(g,"href",`${e.mix.data.img_source}`)),m(b,g)};c(x,b=>{e.mix.data.img_source!=""&&e.mix.data.img_source!=null&&b(_)})}w(()=>{F(u,"src",e.mix.data.avatar),F(u,"alt",e.mix.data.name)}),ta("error",u,we),ra(u),m(o,n)};c(a,o=>{e.mix.data.avatar&&!f(Y)&&o(i)},t)}};c(ze,a=>{!e.mix.data.avatar||f(Y)?a(Ae):a(Be,!1)})}l(K);var ne=r(K,2),N=s(ne),de=s(N),Q=s(de),V=s(Q),me=r(s(V),2),Ce=s(me,!0);l(me),l(V);var X=r(V,2);X.__click=[Da,D];var Ee=s(X);S(Ee,{icon:"mdi:calculator",class:"text-2xl"}),l(X),l(Q);var ve=r(Q,2),ce=s(ve);fe(ce,17,()=>e.mix.data.ingredients.filter(a=>!a.optional),_e,(a,t)=>{he(a,{get ingredient(){return f(t)},get mix(){return e.mix},get measures(){return e.measures}})});var Me=r(ce,2);{var Oe=a=>{var t=Ia(),i=r(p(t),2);fe(i,17,()=>e.mix.data.ingredients.filter(o=>o.optional),_e,(o,n)=>{he(o,{get ingredient(){return f(n)},get mix(){return e.mix},get measures(){return e.measures}})}),m(a,t)};c(Me,a=>{e.mix.data.ingredients.filter(t=>t.optional).length>0&&a(Oe)})}l(ve),l(de),l(N);var Fe=r(N,2);{var Le=a=>{var t=za(),i=p(t),o=s(i);A(o,{class:"!rounded-full !bg-primary-600 !px-2 !py-1 !text-white",onclick:d=>{d.stopPropagation(),xa(e.mix,e.measures)},children:(d,P)=>{z();var I=xe("half");m(d,I)},$$slots:{default:!0}});var n=r(o,2);A(n,{class:"!rounded-full !bg-primary-600 !px-1 !py-1 !text-white",onclick:d=>{d.stopPropagation(),_a(e.mix,e.measures)},children:(d,P)=>{z();var I=xe("double");m(d,I)},$$slots:{default:!0}});var u=r(n,2);{var x=d=>{A(d,{class:"!rounded-full !bg-primary-600 !p-1 !text-white",onclick:P=>{P.stopPropagation(),ge(e.mix,e.measures)},children:(P,I)=>{S(P,{icon:"mdi:arrow-u-left-top"})},$$slots:{default:!0}})};c(u,d=>{f(T)!=1&&d(x)})}l(i);var _=r(i,2),b=r(s(_),2),g=s(b,!0);l(b),l(_);var h=r(_,2);da(h,{switchClass:"!scale-75",textClass:"font-light text-sm",text:"Use original units",click:()=>{setTimeout(ga(),100)},get checked(){return f(U)},set checked(d){y(U,d,!0)}}),w(()=>j(g,f(ie))),m(a,t)};c(Fe,a=>{e.mix.data.ingredients.length>0&&a(Le)})}l(ne),l(J);var ue=r(J,2);{var Ge=a=>{var t=Aa(),i=r(s(t),2),o=s(i);sa(o,()=>{var n;return(n=e.mix.data)==null?void 0:n.description}),l(i),l(t),m(a,t)};c(ue,a=>{var t;(t=e.mix.data)!=null&&t.description&&a(Ge)})}var Z=r(ue,2),$=s(Z),Ue=r(s($));l($);var Ye=r($,2);{var qe=a=>{var t=Ba(),i=r(s(t),2),o=s(i,!0);l(i),l(t),w(()=>{var n;F(i,"href",e.mix.data.source_url),j(o,((n=e.mix.data)==null?void 0:n.source_name)??"link")}),m(a,t)},Re=(a,t)=>{{var i=o=>{var n=Ca(),u=r(p(n),1,!0);w(()=>{var x;return j(u,(x=e.mix.data)==null?void 0:x.source_name)}),m(o,n)};c(a,o=>{var n;(n=e.mix.data)!=null&&n.source_name&&o(i)},t)}};c(Ye,a=>{var t;(t=e.mix.data)!=null&&t.source_url?a(qe):a(Re,!1)})}l(Z);var We=r(Z,2);{var He=a=>{var t=La(),i=s(t),o=r(s(i),4);{var n=x=>{var _=Ea();z(),m(x,_)},u=(x,_)=>{{var b=h=>{var d=Oa(),P=r(p(d),2);{var I=ee=>{var M=Ma(),Ne=r(p(M),3);w(()=>j(Ne,` ${e.mix.data.share_decline_reason??""}`)),m(ee,M)};c(P,ee=>{var M;(M=e.mix.data)!=null&&M.share_decline_reason&&ee(I)})}m(h,d)},g=h=>{var d=Fa();z(),m(h,d)};c(x,h=>{var d;((d=e.mix.data)==null?void 0:d.share_accepted)==!1?h(b):h(g,!1)},_)}};c(o,x=>{var _;((_=e.mix.data)==null?void 0:_.share_accepted)==!0?x(n):x(u,!1)})}l(i),l(t),m(a,t)};c(We,a=>{var t;re().props.auth.user&&((t=e.mix.data)==null?void 0:t.share_mix)==!0&&a(He)})}l(E);var Je=r(E,2);{var Ke=a=>{na(a,{$$events:{close:()=>y(D,!1)}})};c(Je,a=>{f(D)&&a(Ke)})}w(()=>{la(L,1,`flex w-full flex-wrap justify-between px-2 ${f(D)?"pointer-events-none":"pointer-events-auto"}`),j(le,`${e.mix.data.name??""} `),j(Ce,f(T)==1?"":f(T)<1?`/ ${1/f(T)}`:`* ${f(T)}`),j(Ue,` ${e.mix.data.cuisine.name??""}`)}),m(k,C)},$$slots:{default:!0}}),Ze(),pe()}ia(["keyup","click"]);export{mt as default};
